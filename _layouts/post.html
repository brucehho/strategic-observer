---
layout: default
---

{% include header.html %}

<article class="post">
  <header class="post-header">
    <h1>{{ page.title }}</h1>
    <p class="meta"><time>{{ page.date | date: '%Y-%m-%d %H:%M' }}</time>
    {% if page.categories %} · 分类：{% for c in page.categories %}<a href="{{ '/categories/' | relative_url }}{{ c }}/">{{ c }}</a>{% unless forloop.last %}, {% endunless %}{% endfor %}{% endif %}</p>
    {% if page.cover %}<img class="cover" src="{{ page.cover | relative_url }}" alt="cover" />{% endif %}
  </header>

  <div id="toc" class="toc"></div>

  <div class="post-content">{{ content }}</div>

  <footer class="post-footer">
    <p>转载请注明出处。观点仅代表作者个人。</p>
  </footer>
</article>

<script>
(function(){
  const content = document.querySelector('.post-content');
  const toc = document.getElementById('toc');
  if(!content||!toc) return;
  const hs = content.querySelectorAll('h2, h3');
  if(!hs.length) return;
  const ul = document.createElement('ul');
  hs.forEach(h=>{
    if(!h.id) h.id = h.textContent.trim().toLowerCase().replace(/\s+/g,'-');
    const li = document.createElement('li');
    if(h.tagName==='H3') li.style.marginLeft='1rem';
    li.innerHTML = `<a href="#${h.id}">${h.textContent}</a>`;
    ul.appendChild(li);
  });
  const title = document.createElement('div');
  title.innerHTML = '<strong>目录</strong>';
  toc.appendChild(title);
  toc.appendChild(ul);
})();
</script>

{% include footer.html %}

